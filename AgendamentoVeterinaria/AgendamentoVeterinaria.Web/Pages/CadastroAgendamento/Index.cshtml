@page
@model AgendamentoVeterinaria.Web.Pages.CadastroAgendamento.IndexModel
@using AgendamentoVeterinaria.Domain.Entities
@using AgendamentoVeterinaria.Domain.Interfaces
@section NoScroll { }

<div class="flex min-h-screen select-none flex-col gap-5 bg-[url('/img/bglista.png')] bg-cover bg-no-repeat">
	<div class="mt-10 flex flex-col gap-4">
		<div class="mr-96 flex justify-end">
			<div class="flex items-center gap-2 rounded-lg bg-emerald-400 px-5 py-2 shadow-md transition hover:bg-emerald-700">
				<i class='bx bx-plus-square text-xl font-bold text-emerald-200'></i>
				<a asp-page="/CadastroAgendamento/Cadastrar"
				   class="text-base font-bold text-white">
					Agendar
				</a>
			</div>
		</div>

		<div class="flex w-full justify-center px-4 pb-12">
			<div class="h-[650px] w-full max-w-6xl overflow-auto rounded-2xl bg-white shadow-lg">
				<table class="relative w-full text-left text-sm text-gray-700">
					<thead class="bg-black text-white">
						<tr>
							<th class="sticky px-6 py-3 text-xs font-bold uppercase tracking-wider">Data Entrada</th>
							<th class="sticky px-6 py-3 text-xs font-bold uppercase tracking-wider">Data Agendamento</th>
							<th class="sticky px-6 py-3 text-xs font-bold uppercase tracking-wider">Nome do Dono</th>
							<th class="sticky px-6 py-3 text-xs font-bold uppercase tracking-wider">Nome do Pet</th>
							<th class="sticky px-6 py-3 text-center text-xs font-bold uppercase tracking-wider">Ações</th>
						</tr>
					</thead>
					<tbody class="divide-y divide-gray-200">
						@if (Model.AgendamentoConsultas != null && Model.AgendamentoConsultas.Any())
						{
							foreach (var agendamento in Model.AgendamentoConsultas)
							{
								<tr class="transition hover:bg-gray-50">
									<td class="px-6 py-3">@agendamento.DataEntrada?.ToString("dd/MM/yyyy")</td>
									<td class="px-6 py-3">@agendamento.DataAgendamento?.ToString("dd/MM/yyyy")</td>
									<td class="px-6 py-3">@agendamento.NomeDono</td>
									<td class="px-6 py-3">@agendamento.NomePet</td>
									<td class="px-6 py-3 text-center">
										<div class="flex items-center justify-center gap-1">
											<a asp-page="/CadastroAgendamento/Cadastrar"
											   class="flex items-center justify-center rounded-lg bg-blue-500 p-2 text-white transition hover:bg-blue-700" title="Editar">
												<i class='bx bx-pencil text-xl'></i>
											</a>
											<a asp-page="/CadastroAgendamento/Detalhes" asp-route-id="@agendamento.Id"
											   class="flex items-center justify-center rounded-lg bg-green-500 p-2 text-white transition hover:bg-green-700" title="Detalhes">
												<i class='bx bx-eye text-xl'></i>
											</a>
											<form method="post" asp-page-handler="Delete" asp-route-id="@agendamento.Id" onsubmit="return confirm('Confirma exclusão?');" class="inline">
												<button type="submit" class="flex items-center justify-center rounded-lg bg-red-500 p-2 text-white transition hover:bg-red-700" title="Excluir">
													<i class='bx bx-x text-xl'></i>
												</button>
											</form>
										</div>
									</td>
								</tr>
							}
						}
						else
						{
							<tr>
								<td colspan="4" class="p-6 text-center text-gray-500">Nenhum agendamento encontrado.</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
